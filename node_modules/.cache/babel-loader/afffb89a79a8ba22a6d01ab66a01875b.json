{"ast":null,"code":"import _classCallCheck from\"/Users/mica/Projects/HYFIX/Website/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mica/Projects/HYFIX/Website/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/mica/Projects/HYFIX/Website/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mica/Projects/HYFIX/Website/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from'react';import{Link}from'react-router-dom';import{withCookies}from'react-cookie';import{getProductsInCart}from'../../api';var Item=function Item(props){return/*#__PURE__*/_jsxs(\"article\",{className:\"cart-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fake-image\"}),/*#__PURE__*/_jsx(\"h1\",{children:props.item.name}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"$ \",props.item.price]})]});};var Cart=/*#__PURE__*/function(_Component){_inherits(Cart,_Component);var _super=_createSuper(Cart);function Cart(props){var _this;_classCallCheck(this,Cart);_this=_super.call(this,props);_this.fetchItems=function(){console.log('fetch items');getProductsInCart(_this.state.itemsToGet).then(function(products){return _this.setState({fetchedItems:products});}).catch(function(err){return console.log(err);});};_this.renderItems=function(){var newRenderedItems=_this.state.fetchedItems.map(function(current){return/*#__PURE__*/_jsx(Item,{item:current},current._id);});if(_this.state.renderedItems.toString()!==newRenderedItems.toString()){_this.setState({renderedItems:newRenderedItems});}};_this.state={itemsChanged:false,itemsToGet:[],fetchedItems:[],renderedItems:[]};return _this;}_createClass(Cart,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.state.itemsChanged){this.setState({itemsChanged:false});this.fetchItems();}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.state.itemsChanged){this.setState({itemsChanged:false});this.fetchItems();}if(this.state.fetchedItems){console.log('therea re fetched');console.log(this.state.fetchedItems);this.renderItems();}}},{key:\"render\",value:function render(){if(this.state.renderedItems.length>0){return/*#__PURE__*/_jsxs(\"main\",{className:\"products-page\",children:[this.state.renderedItems,/*#__PURE__*/_jsx(Link,{to:\"/store/checkout\",className:\"button checkout-button\",children:\"Checkout\"})]});}else{return/*#__PURE__*/_jsx(\"main\",{className:\"products-page\",children:/*#__PURE__*/_jsx(\"p\",{className:\"no-items\",children:\"No Items in Cart\"})});}}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){var cookies=props.cookies;var itemsInCart=cookies.get('userCart');if(itemsInCart){if(state.itemsToGet.toString()!==itemsInCart.toString()){return{itemsChanged:true,itemsToGet:itemsInCart};}}return null;}}]);return Cart;}(Component);export default withCookies(Cart);","map":{"version":3,"sources":["/Users/mica/Projects/HYFIX/Website/frontend/src/components/store/Cart.js"],"names":["React","Component","Link","withCookies","getProductsInCart","Item","props","item","name","price","Cart","fetchItems","console","log","state","itemsToGet","then","products","setState","fetchedItems","catch","err","renderItems","newRenderedItems","map","current","_id","renderedItems","toString","itemsChanged","length","cookies","itemsInCart","get"],"mappings":"gtBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,WAAT,KAA4B,cAA5B,CACA,OAASC,iBAAT,KAAkC,WAAlC,CAGA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAAAC,KAAK,qBACd,iBAAS,SAAS,CAAC,WAAnB,wBACI,YAAK,SAAS,CAAC,YAAf,EADJ,cAEI,oBAAKA,KAAK,CAACC,IAAN,CAAWC,IAAhB,EAFJ,cAGI,2BAAOF,KAAK,CAACC,IAAN,CAAWE,KAAlB,GAHJ,GADc,EAAlB,C,GAQMC,CAAAA,I,4FACF,cAAYJ,KAAZ,CAAmB,sCACf,uBAAMA,KAAN,EADe,MA2CnBK,UA3CmB,CA2CN,UAAM,CACfC,OAAO,CAACC,GAAR,CAAY,aAAZ,EAEAT,iBAAiB,CAAC,MAAKU,KAAL,CAAWC,UAAZ,CAAjB,CACCC,IADD,CACM,SAAAC,QAAQ,QAAI,OAAKC,QAAL,CAAc,CAAEC,YAAY,CAAEF,QAAhB,CAAd,CAAJ,EADd,EAECG,KAFD,CAEO,SAAAC,GAAG,QAAIT,CAAAA,OAAO,CAACC,GAAR,CAAYQ,GAAZ,CAAJ,EAFV,EAIH,CAlDkB,OAqDnBC,WArDmB,CAqDL,UAAM,CAChB,GAAIC,CAAAA,gBAAgB,CAAG,MAAKT,KAAL,CAAWK,YAAX,CAAwBK,GAAxB,CAA4B,SAAAC,OAAO,CAAI,CAC1D,mBAAO,KAAC,IAAD,EAAM,IAAI,CAAEA,OAAZ,EAA0BA,OAAO,CAACC,GAAlC,CAAP,CACH,CAFsB,CAAvB,CAIA,GAAI,MAAKZ,KAAL,CAAWa,aAAX,CAAyBC,QAAzB,KAAwCL,gBAAgB,CAACK,QAAjB,EAA5C,CAAyE,CACrE,MAAKV,QAAL,CAAc,CAAES,aAAa,CAAEJ,gBAAjB,CAAd,EACH,CAEJ,CA9DkB,CAGf,MAAKT,KAAL,CAAa,CAAGe,YAAY,CAAE,KAAjB,CACGd,UAAU,CAAE,EADf,CAEGI,YAAY,CAAE,EAFjB,CAGGQ,aAAa,CAAE,EAHlB,CAAb,CAHe,aAOlB,C,8EAgBmB,CAChB,GAAI,KAAKb,KAAL,CAAWe,YAAf,CAA6B,CACzB,KAAKX,QAAL,CAAc,CAAEW,YAAY,CAAE,KAAhB,CAAd,EACA,KAAKlB,UAAL,GACH,CACJ,C,+DAEoB,CACjB,GAAI,KAAKG,KAAL,CAAWe,YAAf,CAA6B,CACzB,KAAKX,QAAL,CAAc,CAAEW,YAAY,CAAE,KAAhB,CAAd,EACA,KAAKlB,UAAL,GACH,CAED,GAAI,KAAKG,KAAL,CAAWK,YAAf,CAA6B,CACzBP,OAAO,CAACC,GAAR,CAAY,mBAAZ,EACAD,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAL,CAAWK,YAAvB,EACA,KAAKG,WAAL,GACH,CACJ,C,uCAuBQ,CACL,GAAI,KAAKR,KAAL,CAAWa,aAAX,CAAyBG,MAAzB,CAAkC,CAAtC,CAAyC,CACrC,mBACI,cAAM,SAAS,CAAC,eAAhB,WACK,KAAKhB,KAAL,CAAWa,aADhB,cAEI,KAAC,IAAD,EAAM,EAAE,CAAC,iBAAT,CAA2B,SAAS,CAAC,wBAArC,sBAFJ,GADJ,CAOH,CARD,IAQO,CACH,mBACI,aAAM,SAAS,CAAC,eAAhB,uBACI,UAAG,SAAS,CAAC,UAAb,8BADJ,EADJ,CAMH,CAEJ,C,4EAzE+BrB,K,CAAOQ,K,CAAO,CAC1C,GAAIiB,CAAAA,OAAO,CAAGzB,KAAK,CAACyB,OAApB,CACA,GAAIC,CAAAA,WAAW,CAAGD,OAAO,CAACE,GAAR,CAAY,UAAZ,CAAlB,CAEA,GAAID,WAAJ,CAAiB,CACb,GAAIlB,KAAK,CAACC,UAAN,CAAiBa,QAAjB,KAAgCI,WAAW,CAACJ,QAAZ,EAApC,CAA4D,CACxD,MAAO,CAAEC,YAAY,CAAE,IAAhB,CAAsBd,UAAU,CAAEiB,WAAlC,CAAP,CACH,CACJ,CAED,MAAO,KAAP,CAEH,C,kBAtBc/B,S,EAsFnB,cAAeE,CAAAA,WAAW,CAACO,IAAD,CAA1B","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { withCookies } from 'react-cookie';\nimport { getProductsInCart } from '../../api';\n\n\nconst Item = props => (\n    <article className='cart-item'>\n        <div className='fake-image'></div>\n        <h1>{props.item.name}</h1>\n        <h2>$ {props.item.price}</h2>\n    </article>\n)\n\nclass Cart extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {  itemsChanged: false,\n                        itemsToGet: [],\n                        fetchedItems: [],\n                        renderedItems: [] };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        let cookies = props.cookies;\n        let itemsInCart = cookies.get('userCart');\n\n        if (itemsInCart) {\n            if (state.itemsToGet.toString() !== itemsInCart.toString()) {\n                return { itemsChanged: true, itemsToGet: itemsInCart }\n            }\n        }\n\n        return null;\n       \n    }\n\n    componentDidMount() {\n        if (this.state.itemsChanged) {\n            this.setState({ itemsChanged: false});\n            this.fetchItems();\n        }\n    }\n\n    componentDidUpdate() {\n        if (this.state.itemsChanged) {\n            this.setState({ itemsChanged: false});\n            this.fetchItems();\n        } \n        \n        if (this.state.fetchedItems) {\n            console.log('therea re fetched');\n            console.log(this.state.fetchedItems);\n            this.renderItems()\n        }\n    }\n\n    fetchItems = () => {\n        console.log('fetch items');\n\n        getProductsInCart(this.state.itemsToGet)\n        .then(products => this.setState({ fetchedItems: products }))\n        .catch(err => console.log(err))\n\n    }\n\n\n    renderItems = () => {\n        let newRenderedItems = this.state.fetchedItems.map(current => {\n            return <Item item={current} key={current._id}/>;\n        })\n\n        if (this.state.renderedItems.toString() !== newRenderedItems.toString()) {\n            this.setState({ renderedItems: newRenderedItems });\n        }\n        \n    }\n\n    render() {\n        if (this.state.renderedItems.length > 0) {\n            return (\n                <main className='products-page'>\n                    {this.state.renderedItems}\n                    <Link to='/store/checkout' className='button checkout-button'>Checkout</Link>\n                </main>\n            );\n\n        } else {\n            return (\n                <main className='products-page'>\n                    <p className='no-items'>No Items in Cart</p>\n                </main>\n\n            )\n        }\n        \n    }\n}\n\nexport default withCookies(Cart);\n\n "]},"metadata":{},"sourceType":"module"}
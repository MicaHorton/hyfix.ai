{"ast":null,"code":"import _classCallCheck from\"/Users/mica/Projects/Websites/hyfix/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mica/Projects/Websites/hyfix/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/mica/Projects/Websites/hyfix/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mica/Projects/Websites/hyfix/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import{withCookies}from'react-cookie';import{getProductsInCart}from'../../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Item=function Item(props){return/*#__PURE__*/_jsxs(\"article\",{className:\"cart-item\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"cart-image\",alt:props.item.img,src:\"https://s3-us-west-1.amazonaws.com/hyfxi.ai-images/\".concat(props.item.img)}),/*#__PURE__*/_jsx(\"h1\",{children:props.item.name}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"$ \",props.item.price]})]});};var Cart=/*#__PURE__*/function(_Component){_inherits(Cart,_Component);var _super=_createSuper(Cart);function Cart(props){var _this;_classCallCheck(this,Cart);_this=_super.call(this,props);_this.fetchItems=function(){getProductsInCart(_this.state.itemsToGet).then(function(products){return _this.setState({fetchedItems:products});}).catch(function(err){return console.log(err);});};_this.renderItems=function(){var newRenderedItems=_this.state.fetchedItems.map(function(current){return/*#__PURE__*/_jsx(Item,{item:current},current._id);});if(_this.state.renderedItems.toString()!==newRenderedItems.toString()){_this.setState({renderedItems:newRenderedItems});}};_this.state={itemsChanged:false,itemsToGet:[],fetchedItems:[],renderedItems:[]};return _this;}_createClass(Cart,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.state.itemsChanged){this.setState({itemsChanged:false});this.fetchItems();}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.state.itemsChanged){this.setState({itemsChanged:false});this.fetchItems();}if(this.state.fetchedItems){console.log(this.state.fetchedItems);this.renderItems();}}},{key:\"render\",value:function render(){if(this.state.renderedItems.length>0){return/*#__PURE__*/_jsxs(\"main\",{className:\"products-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"products-list\",children:this.state.renderedItems}),/*#__PURE__*/_jsx(Link,{to:\"/store/checkout\",className:\"button checkout-button\",children:\"Checkout\"})]});}else{return/*#__PURE__*/_jsx(\"main\",{className:\"products-page\",children:/*#__PURE__*/_jsx(\"p\",{className:\"no-items\",children:\"No Items in Cart\"})});}}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){var cookies=props.cookies.get('userCart');var itemsInCart;if(cookies!=='undefined'){itemsInCart=cookies;}else{itemsInCart=false;}if(itemsInCart){if(state.itemsToGet.toString()!==itemsInCart.toString()){return{itemsChanged:true,itemsToGet:itemsInCart};}}return null;}}]);return Cart;}(Component);export default withCookies(Cart);","map":{"version":3,"sources":["/Users/mica/Projects/Websites/hyfix/frontend/src/pages/store/Cart.js"],"names":["React","Component","Link","withCookies","getProductsInCart","Item","props","item","img","name","price","Cart","fetchItems","state","itemsToGet","then","products","setState","fetchedItems","catch","err","console","log","renderItems","newRenderedItems","map","current","_id","renderedItems","toString","itemsChanged","length","cookies","get","itemsInCart"],"mappings":"4nBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,WAAT,KAA4B,cAA5B,CACA,OAASC,iBAAT,KAAkC,WAAlC,C,wFAGA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAAAC,KAAK,qBACd,iBAAS,SAAS,CAAC,WAAnB,wBACI,YAAK,SAAS,CAAC,YAAf,CAA4B,GAAG,CAAEA,KAAK,CAACC,IAAN,CAAWC,GAA5C,CACC,GAAG,8DAAwDF,KAAK,CAACC,IAAN,CAAWC,GAAnE,CADJ,EADJ,cAGI,oBAAKF,KAAK,CAACC,IAAN,CAAWE,IAAhB,EAHJ,cAII,2BAAOH,KAAK,CAACC,IAAN,CAAWG,KAAlB,GAJJ,GADc,EAAlB,C,GASMC,CAAAA,I,4FACF,cAAYL,KAAZ,CAAmB,sCACf,uBAAMA,KAAN,EADe,MA+CnBM,UA/CmB,CA+CN,UAAM,CACfR,iBAAiB,CAAC,MAAKS,KAAL,CAAWC,UAAZ,CAAjB,CACCC,IADD,CACM,SAAAC,QAAQ,QAAI,OAAKC,QAAL,CAAc,CAAEC,YAAY,CAAEF,QAAhB,CAAd,CAAJ,EADd,EAECG,KAFD,CAEO,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAFV,EAGH,CAnDkB,OAsDnBG,WAtDmB,CAsDL,UAAM,CAChB,GAAIC,CAAAA,gBAAgB,CAAG,MAAKX,KAAL,CAAWK,YAAX,CAAwBO,GAAxB,CAA4B,SAAAC,OAAO,CAAI,CAC1D,mBAAO,KAAC,IAAD,EAAM,IAAI,CAAEA,OAAZ,EAA0BA,OAAO,CAACC,GAAlC,CAAP,CACH,CAFsB,CAAvB,CAIA,GAAI,MAAKd,KAAL,CAAWe,aAAX,CAAyBC,QAAzB,KAAwCL,gBAAgB,CAACK,QAAjB,EAA5C,CAAyE,CACrE,MAAKZ,QAAL,CAAc,CAAEW,aAAa,CAAEJ,gBAAjB,CAAd,EACH,CAEJ,CA/DkB,CAGf,MAAKX,KAAL,CAAa,CAAGiB,YAAY,CAAE,KAAjB,CACGhB,UAAU,CAAE,EADf,CAEGI,YAAY,CAAE,EAFjB,CAGGU,aAAa,CAAE,EAHlB,CAAb,CAHe,aAOlB,C,kDAqBD,4BAAoB,CAChB,GAAI,KAAKf,KAAL,CAAWiB,YAAf,CAA6B,CACzB,KAAKb,QAAL,CAAc,CAAEa,YAAY,CAAE,KAAhB,CAAd,EACA,KAAKlB,UAAL,GACH,CACJ,C,kCAED,6BAAqB,CACjB,GAAI,KAAKC,KAAL,CAAWiB,YAAf,CAA6B,CACzB,KAAKb,QAAL,CAAc,CAAEa,YAAY,CAAE,KAAhB,CAAd,EACA,KAAKlB,UAAL,GACH,CAED,GAAI,KAAKC,KAAL,CAAWK,YAAf,CAA6B,CACzBG,OAAO,CAACC,GAAR,CAAY,KAAKT,KAAL,CAAWK,YAAvB,EACA,KAAKK,WAAL,GACH,CACJ,C,sBAoBD,iBAAS,CACL,GAAI,KAAKV,KAAL,CAAWe,aAAX,CAAyBG,MAAzB,CAAkC,CAAtC,CAAyC,CACrC,mBACI,cAAM,SAAS,CAAC,eAAhB,wBACI,YAAK,SAAS,CAAC,eAAf,UACK,KAAKlB,KAAL,CAAWe,aADhB,EADJ,cAII,KAAC,IAAD,EAAM,EAAE,CAAC,iBAAT,CAA2B,SAAS,CAAC,wBAArC,sBAJJ,GADJ,CAQH,CATD,IASO,CACH,mBACI,aAAM,SAAS,CAAC,eAAhB,uBACI,UAAG,SAAS,CAAC,UAAb,8BADJ,EADJ,CAMH,CAEJ,C,0CA3ED,kCAAgCtB,KAAhC,CAAuCO,KAAvC,CAA8C,CAC1C,GAAImB,CAAAA,OAAO,CAAG1B,KAAK,CAAC0B,OAAN,CAAcC,GAAd,CAAkB,UAAlB,CAAd,CACA,GAAIC,CAAAA,WAAJ,CACA,GAAIF,OAAO,GAAK,WAAhB,CAA6B,CACzBE,WAAW,CAAGF,OAAd,CACH,CAFD,IAEO,CACHE,WAAW,CAAG,KAAd,CACH,CAED,GAAIA,WAAJ,CAAiB,CACb,GAAIrB,KAAK,CAACC,UAAN,CAAiBe,QAAjB,KAAgCK,WAAW,CAACL,QAAZ,EAApC,CAA4D,CACxD,MAAO,CAAEC,YAAY,CAAE,IAAhB,CAAsBhB,UAAU,CAAEoB,WAAlC,CAAP,CACH,CACJ,CAED,MAAO,KAAP,CAEH,C,kBA3BcjC,S,EAwFnB,cAAeE,CAAAA,WAAW,CAACQ,IAAD,CAA1B","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { withCookies } from 'react-cookie';\nimport { getProductsInCart } from '../../api';\n\n\nconst Item = props => (\n    <article className='cart-item'>\n        <img className='cart-image' alt={props.item.img}\n         src={`https://s3-us-west-1.amazonaws.com/hyfxi.ai-images/${props.item.img}`}></img>\n        <h1>{props.item.name}</h1>\n        <h2>$ {props.item.price}</h2>\n    </article>\n)\n\nclass Cart extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {  itemsChanged: false,\n                        itemsToGet: [],\n                        fetchedItems: [],\n                        renderedItems: [] };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        let cookies = props.cookies.get('userCart');\n        let itemsInCart;\n        if (cookies !== 'undefined') {\n            itemsInCart = cookies;\n        } else {\n            itemsInCart = false;\n        }\n\n        if (itemsInCart) {\n            if (state.itemsToGet.toString() !== itemsInCart.toString()) {\n                return { itemsChanged: true, itemsToGet: itemsInCart }\n            }\n        }\n\n        return null;\n       \n    }\n\n    componentDidMount() {\n        if (this.state.itemsChanged) {\n            this.setState({ itemsChanged: false});\n            this.fetchItems();\n        }\n    }\n\n    componentDidUpdate() {\n        if (this.state.itemsChanged) {\n            this.setState({ itemsChanged: false});\n            this.fetchItems();\n        } \n        \n        if (this.state.fetchedItems) {\n            console.log(this.state.fetchedItems);\n            this.renderItems()\n        }\n    }\n\n    fetchItems = () => {\n        getProductsInCart(this.state.itemsToGet)\n        .then(products => this.setState({ fetchedItems: products }))\n        .catch(err => console.log(err))\n    }\n\n\n    renderItems = () => {\n        let newRenderedItems = this.state.fetchedItems.map(current => {\n            return <Item item={current} key={current._id}/>;\n        })\n\n        if (this.state.renderedItems.toString() !== newRenderedItems.toString()) {\n            this.setState({ renderedItems: newRenderedItems });\n        }\n        \n    }\n\n    render() {\n        if (this.state.renderedItems.length > 0) {\n            return (\n                <main className='products-page'>\n                    <div className='products-list'>\n                        {this.state.renderedItems}\n                    </div>\n                    <Link to='/store/checkout' className='button checkout-button'>Checkout</Link>\n                </main>\n            );\n        } else {\n            return (\n                <main className='products-page'>\n                    <p className='no-items'>No Items in Cart</p>\n                </main>\n\n            )\n        }\n        \n    }\n}\n\nexport default withCookies(Cart);\n\n "]},"metadata":{},"sourceType":"module"}
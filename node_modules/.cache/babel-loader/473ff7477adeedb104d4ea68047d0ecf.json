{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/mica/Projects/Websites/hyfix/frontend/src/components/store/purchase/Checkout.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useEffect, useState } from 'react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { useCookies } from 'react-cookie';\nimport { CardElement, Elements, useElements, useStripe } from '@stripe/react-stripe-js';\nimport { getProductsInCart, createPaymentIntent } from '../../../api';\nconst CARD_ELEMENT_OPTIONS = {\n  style: {\n    base: {\n      color: '#32325d',\n      fontFamily: '\"Helvetica Neue\" , Helvetica, sans-serif',\n      fontSmoothing: 'antialiased',\n      fontSize: '40px',\n      '::placeholder': {\n        color: '#aab7c4'\n      }\n    },\n    invalid: {\n      color: '#fa755a',\n      iconColor: '#fa755a'\n    }\n  }\n};\n\nconst CheckoutForm = () => {\n  _s();\n\n  const stripe = useStripe();\n  const elements = useElements();\n  const [error, setError] = useState(null);\n  const [clientSecret, setClientSecret] = useState(null);\n  const [cookies] = useCookies();\n  const [metadata, setMetadata] = useState(null);\n  const [succeeded, setSucceeded] = useState(false);\n  const [processing, setProcessing] = useState(false);\n  useEffect(() => {\n    const productList = cookies.userCart;\n    getProductsInCart(productList).then(products => {\n      createPaymentIntent(products).then(clientSecret => {\n        console.log('Payment intent success!');\n        setClientSecret(clientSecret);\n      }).catch(err => {\n        setError(err.message);\n      });\n    });\n  }, []); //keeps hook to only once, intresting?\n\n  const handlePaymentChange = ev => {\n    if (ev.error) {\n      setError(ev.error.message);\n    } else {\n      setError(null);\n    }\n  };\n\n  const handleSubmit = async ev => {\n    ev.preventDefault();\n    setProcessing(true);\n    console.log('EVENT', ev);\n    const payload = await stripe.confirmCardPayment(clientSecret, {\n      payment_method: {\n        card: elements.getElement(CardElement),\n        billing_details: {\n          name: ev.target.name.value\n        }\n      }\n    });\n\n    if (payload.error) {\n      setError(`Payment failed: ${payload.error.message}`);\n      setProcessing(false);\n      console.log(\"[error]\", payload.error);\n    } else {\n      setError(null);\n      setSucceeded(true);\n      setProcessing(false);\n      setMetadata(payload.paymentIntent);\n      console.log(\"[PaymentIntent]\", payload.paymentIntent);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"checkout-page\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"checkout-form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Shipping\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Recipient Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: \"recipient\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Street Adress\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: \"street\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          value: \"city\",\n          children: \"City\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"double-input\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            value: \"state\",\n            children: \"State\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            value: \"code\",\n            children: \"Zip/Postal Code\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          value: \"country\",\n          children: \"Country\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Payment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"card-element\",\n          children: \"Credit or Debit Card\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CardElement, {\n          id: \"card-element\",\n          options: CARD_ELEMENT_OPTIONS,\n          onChange: handlePaymentChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-errors\",\n          role: \"alert\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button checkout-button\",\n        type: \"submit\",\n        children: \"Submit Payment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CheckoutForm, \"L9jEB5oz7M/+rKfHQegxKMaKYqE=\", false, function () {\n  return [useStripe, useElements, useCookies];\n});\n\n_c = CheckoutForm;\nconst stripePromise = loadStripe('pk_test_51I0CsSIzd0xoN2NEasujFfk8OIEYrwO5KrdT4fYAjUiQ8iJVP1fumZ3XGDf1XJq0Q3C9I0wlsQxbtYY2xRAvP2eZ0024wl5yqd');\n\nconst CheckoutPage = () => {\n  return /*#__PURE__*/_jsxDEV(Elements, {\n    stripe: stripePromise,\n    children: /*#__PURE__*/_jsxDEV(CheckoutForm, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 11\n  }, this);\n};\n\n_c2 = CheckoutPage;\nexport default CheckoutPage;\n/* 4242 4242 4242 4242 */\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CheckoutForm\");\n$RefreshReg$(_c2, \"CheckoutPage\");","map":{"version":3,"sources":["/Users/mica/Projects/Websites/hyfix/frontend/src/components/store/purchase/Checkout.js"],"names":["React","useEffect","useState","loadStripe","useCookies","CardElement","Elements","useElements","useStripe","getProductsInCart","createPaymentIntent","CARD_ELEMENT_OPTIONS","style","base","color","fontFamily","fontSmoothing","fontSize","invalid","iconColor","CheckoutForm","stripe","elements","error","setError","clientSecret","setClientSecret","cookies","metadata","setMetadata","succeeded","setSucceeded","processing","setProcessing","productList","userCart","then","products","console","log","catch","err","message","handlePaymentChange","ev","handleSubmit","preventDefault","payload","confirmCardPayment","payment_method","card","getElement","billing_details","name","target","value","paymentIntent","stripePromise","CheckoutPage"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useEffect, useState } from 'react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { useCookies } from 'react-cookie';\nimport {\n    CardElement,\n    Elements,\n    useElements,\n    useStripe\n} from '@stripe/react-stripe-js';\nimport { getProductsInCart, createPaymentIntent} from '../../../api';\n\nconst CARD_ELEMENT_OPTIONS = {\n    style: {\n        base: {\n            color: '#32325d',\n            fontFamily: '\"Helvetica Neue\" , Helvetica, sans-serif',\n            fontSmoothing: 'antialiased',\n            fontSize: '40px',\n            '::placeholder': {\n                color: '#aab7c4'\n            }\n        },\n        invalid: {\n            color: '#fa755a',\n            iconColor: '#fa755a'\n        }\n    }\n};\n\nconst CheckoutForm = () => {\n    const stripe = useStripe();\n    const elements = useElements();\n\n    const [error, setError] = useState(null);\n    const [clientSecret, setClientSecret] = useState(null);\n    const [cookies] = useCookies();\n\n    const [metadata, setMetadata] = useState(null);\n    const [succeeded, setSucceeded] = useState(false);\n    const [processing, setProcessing] = useState(false);\n\n    useEffect(() => {\n        const productList = cookies.userCart;\n        getProductsInCart(productList).then((products) => { \n            \n            createPaymentIntent(products)\n            .then((clientSecret) => {\n                console.log('Payment intent success!')\n                setClientSecret(clientSecret);\n            })\n            .catch((err) => {\n                setError(err.message);\n            });\n        \n        });\n\n    }, []); //keeps hook to only once, intresting?\n\n    const handlePaymentChange = (ev) => {\n        if (ev.error) {\n            setError(ev.error.message);\n        } else {\n            setError(null);\n        }\n    }\n\n    const handleSubmit = async (ev) => {\n        ev.preventDefault();\n        setProcessing(true);\n        console.log('EVENT', ev);\n        \n\n        const payload = await stripe.confirmCardPayment(clientSecret, {\n            payment_method: {\n                card: elements.getElement(CardElement),\n                billing_details: {\n                    name: ev.target.name.value,\n                },\n            },\n        });\n\n        if (payload.error) {\n            setError(`Payment failed: ${payload.error.message}`);\n            setProcessing(false);\n            console.log(\"[error]\", payload.error);\n        } else {\n            setError(null);\n            setSucceeded(true);\n            setProcessing(false);\n            setMetadata(payload.paymentIntent);\n            console.log(\"[PaymentIntent]\", payload.paymentIntent);\n        }\n\n    };\n\n    return (\n        <main className='checkout-page'>\n            <form className='checkout-form' onSubmit={handleSubmit}>\n                <div className='form-section'>\n                    <h2>Shipping</h2>\n\n                    <label>Recipient Name</label>\n                    <input value='recipient' />\n\n                    <label>Street Adress</label>\n                    <input value='street' />\n\n                    <label value='city'>City</label>\n                    <input />\n\n                    <div className='double-input'>\n                        <label value='state'>State</label>\n                        <input />\n\n                        <label value='code'>Zip/Postal Code</label>\n                        <input />\n                    </div>\n                    \n\n                    <label value='country'>Country</label>\n                    <input />\n                </div>\n\n                <div className='form-section'>\n                    <h2>Payment</h2>\n                    <label htmlFor='card-element'>Credit or Debit Card</label>\n                    <CardElement \n                        id='card-element' \n                        options={CARD_ELEMENT_OPTIONS} \n                        onChange={handlePaymentChange}/>\n                    <div className='card-errors' role='alert'>{error}</div>\n                </div>\n\n                <button className='button checkout-button' type='submit'>Submit Payment</button>\n\n            </form>\n        </main>\n                \n        );\n}\n\nconst stripePromise = loadStripe('pk_test_51I0CsSIzd0xoN2NEasujFfk8OIEYrwO5KrdT4fYAjUiQ8iJVP1fumZ3XGDf1XJq0Q3C9I0wlsQxbtYY2xRAvP2eZ0024wl5yqd');\nconst CheckoutPage = () => {\n        return (\n          <Elements stripe={stripePromise}>\n            <CheckoutForm />\n        </Elements>\n    );\n}\n\nexport default CheckoutPage; \n\n\n/* 4242 4242 4242 4242 */"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/mica/Projects/Websites/hyfix/frontend/src/components/store/purchase/Checkout.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useEffect, useState } from 'react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { useCookies } from 'react-cookie';\nimport { CardElement, Elements, useElements, useStripe } from '@stripe/react-stripe-js';\nimport { getProductsInCart, createPaymentIntent } from '../../../api';\nconst CARD_ELEMENT_OPTIONS = {\n  style: {\n    base: {\n      color: '#32325d',\n      fontFamily: '\"Helvetica Neue\" , Helvetica, sans-serif',\n      fontSmoothing: 'antialiased',\n      fontSize: '40px',\n      '::placeholder': {\n        color: '#aab7c4'\n      }\n    },\n    invalid: {\n      color: '#fa755a',\n      iconColor: '#fa755a'\n    }\n  }\n};\n\nconst CheckoutForm = () => {\n  _s();\n\n  const stripe = useStripe();\n  const elements = useElements();\n  const [error, setError] = useState(null);\n  const [clientSecret, setClientSecret] = useState(null);\n  const [cookies] = useCookies();\n  const [metadata, setMetadata] = useState(null);\n  const [succeeded, setSucceeded] = useState(false);\n  const [processing, setProcessing] = useState(false);\n  const [recipient, setRecipient] = useState(null);\n  const [street, setStreet] = useState(null);\n  const [city, setCity] = useState(null);\n  const [theState, setTheState] = useState(null);\n  const [code, setCode] = useState(null);\n  const [country, setCountry] = useState(null);\n  useEffect(() => {\n    const productList = cookies.userCart;\n    getProductsInCart(productList).then(products => {\n      createPaymentIntent(products).then(clientSecret => {\n        console.log('Payment intent success!');\n        setClientSecret(clientSecret);\n      }).catch(err => {\n        setError(err.message);\n      });\n    });\n  }, []); //keeps hook to only once, intresting?\n\n  const handlePaymentChange = ev => {\n    if (ev.error) {\n      setError(ev.error.message);\n    } else {\n      setError(null);\n    }\n  };\n\n  const handleSubmit = async ev => {\n    ev.preventDefault();\n    setProcessing(true);\n    const payload = await stripe.confirmCardPayment(clientSecret, {\n      payment_method: {\n        card: elements.getElement(CardElement),\n        billing_details: {\n          name: ev.target.name.value\n        },\n        shipping: {\n          name: name,\n          address: {\n            line1: street,\n            city: city,\n            country: country,\n            postal_code\n          }\n        }\n      }\n    });\n\n    if (payload.error) {\n      setError(`Payment failed: ${payload.error.message}`);\n      setProcessing(false);\n      console.log(\"[error]\", payload.error);\n    } else {\n      setError(null);\n      setSucceeded(true);\n      setProcessing(false);\n      setMetadata(payload.paymentIntent);\n      console.log(\"[PaymentIntent]\", payload.paymentIntent);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"checkout-page\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"checkout-form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Shipping\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Recipient Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: recipient,\n          onChange: e => setRecipient(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Street Address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: street,\n          onChange: e => setStreet(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"City\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: city,\n          onChange: e => setCity(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"double-input\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"State\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: theState,\n            onChange: e => setTheState(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Zip/Postal Code\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: code,\n            onChange: e => setCode(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Country\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: country,\n          onChange: e => setCountry(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Payment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"card-element\",\n          children: \"Credit or Debit Card\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CardElement, {\n          id: \"card-element\",\n          options: CARD_ELEMENT_OPTIONS,\n          onChange: handlePaymentChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-errors\",\n          role: \"alert\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button checkout-button\",\n        type: \"submit\",\n        children: \"Submit Payment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CheckoutForm, \"Ds0AIXAOVyS4ww5va+YDEss4cl8=\", false, function () {\n  return [useStripe, useElements, useCookies];\n});\n\n_c = CheckoutForm;\nconst stripePromise = loadStripe('pk_test_51I0CsSIzd0xoN2NEasujFfk8OIEYrwO5KrdT4fYAjUiQ8iJVP1fumZ3XGDf1XJq0Q3C9I0wlsQxbtYY2xRAvP2eZ0024wl5yqd');\n\nconst CheckoutPage = () => {\n  return /*#__PURE__*/_jsxDEV(Elements, {\n    stripe: stripePromise,\n    children: /*#__PURE__*/_jsxDEV(CheckoutForm, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 11\n  }, this);\n};\n\n_c2 = CheckoutPage;\nexport default CheckoutPage;\n/* 4242 4242 4242 4242 */\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CheckoutForm\");\n$RefreshReg$(_c2, \"CheckoutPage\");","map":{"version":3,"sources":["/Users/mica/Projects/Websites/hyfix/frontend/src/components/store/purchase/Checkout.js"],"names":["React","useEffect","useState","loadStripe","useCookies","CardElement","Elements","useElements","useStripe","getProductsInCart","createPaymentIntent","CARD_ELEMENT_OPTIONS","style","base","color","fontFamily","fontSmoothing","fontSize","invalid","iconColor","CheckoutForm","stripe","elements","error","setError","clientSecret","setClientSecret","cookies","metadata","setMetadata","succeeded","setSucceeded","processing","setProcessing","recipient","setRecipient","street","setStreet","city","setCity","theState","setTheState","code","setCode","country","setCountry","productList","userCart","then","products","console","log","catch","err","message","handlePaymentChange","ev","handleSubmit","preventDefault","payload","confirmCardPayment","payment_method","card","getElement","billing_details","name","target","value","shipping","address","line1","postal_code","paymentIntent","e","stripePromise","CheckoutPage"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useEffect, useState } from 'react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { useCookies } from 'react-cookie';\nimport {\n    CardElement,\n    Elements,\n    useElements,\n    useStripe\n} from '@stripe/react-stripe-js';\nimport { getProductsInCart, createPaymentIntent} from '../../../api';\n\nconst CARD_ELEMENT_OPTIONS = {\n    style: {\n        base: {\n            color: '#32325d',\n            fontFamily: '\"Helvetica Neue\" , Helvetica, sans-serif',\n            fontSmoothing: 'antialiased',\n            fontSize: '40px',\n            '::placeholder': {\n                color: '#aab7c4'\n            }\n        },\n        invalid: {\n            color: '#fa755a',\n            iconColor: '#fa755a'\n        }\n    }\n};\n\nconst CheckoutForm = () => {\n    const stripe = useStripe();\n    const elements = useElements();\n\n    const [error, setError] = useState(null);\n    const [clientSecret, setClientSecret] = useState(null);\n    const [cookies] = useCookies();\n\n    const [metadata, setMetadata] = useState(null);\n    const [succeeded, setSucceeded] = useState(false);\n    const [processing, setProcessing] = useState(false);\n\n    const [recipient, setRecipient] = useState(null);\n    const [street, setStreet] = useState(null);\n    const [city, setCity] = useState(null);\n    const [theState, setTheState] = useState(null);\n    const [code, setCode] = useState(null);\n    const [country, setCountry] = useState(null);\n\n    useEffect(() => {\n        const productList = cookies.userCart;\n        getProductsInCart(productList).then((products) => { \n            \n            createPaymentIntent(products)\n            .then((clientSecret) => {\n                console.log('Payment intent success!')\n                setClientSecret(clientSecret);\n            })\n            .catch((err) => {\n                setError(err.message);\n            });\n        \n        });\n\n    }, []); //keeps hook to only once, intresting?\n\n    const handlePaymentChange = (ev) => {\n        if (ev.error) {\n            setError(ev.error.message);\n        } else {\n            setError(null);\n        }\n    }\n\n    const handleSubmit = async (ev) => {\n        ev.preventDefault();\n        setProcessing(true);\n\n        const payload = await stripe.confirmCardPayment(clientSecret, {\n            payment_method: {\n                card: elements.getElement(CardElement),\n                billing_details: {\n                    name: ev.target.name.value,\n                },\n                shipping: {\n                    name: name,\n                    address: {\n                        line1: street, \n                        city: city,\n                        country: country,\n                        postal_code\n\n                    }\n                }\n            },\n        });\n\n        if (payload.error) {\n            setError(`Payment failed: ${payload.error.message}`);\n            setProcessing(false);\n            console.log(\"[error]\", payload.error);\n        } else {\n            setError(null);\n            setSucceeded(true);\n            setProcessing(false);\n            setMetadata(payload.paymentIntent);\n            console.log(\"[PaymentIntent]\", payload.paymentIntent);\n        }\n\n    };\n\n    return (\n        <main className='checkout-page'>\n            <form className='checkout-form' onSubmit={handleSubmit}>\n                <div className='form-section'>\n                    <h2>Shipping</h2>\n\n                    <label>Recipient Name</label>\n                    <input value={recipient} onChange={e => setRecipient(e.target.value)}/>\n\n                    <label>Street Address</label>\n                    <input value={street} onChange={e => setStreet(e.target.value)} />\n\n                    <label>City</label>\n                    <input value={city} onChange={e => setCity(e.target.value)} />\n\n                    <div className='double-input'>\n                        <label>State</label>\n                        <input value={theState} onChange={e => setTheState(e.target.value)} />\n\n                        <label>Zip/Postal Code</label>\n                        <input value={code} onChange={e => setCode(e.target.value)} />\n                    </div>\n                    \n\n                    <label>Country</label>\n                    <input value={country} onChange={e => setCountry(e.target.value)} />\n                </div>\n\n                <div className='form-section'>\n                    <h2>Payment</h2>\n                    <label htmlFor='card-element'>Credit or Debit Card</label>\n                    <CardElement \n                        id='card-element' \n                        options={CARD_ELEMENT_OPTIONS} \n                        onChange={handlePaymentChange}/>\n                    <div className='card-errors' role='alert'>{error}</div>\n                </div>\n\n                <button className='button checkout-button' type='submit'>Submit Payment</button>\n\n            </form>\n        </main>\n                \n        );\n}\n\nconst stripePromise = loadStripe('pk_test_51I0CsSIzd0xoN2NEasujFfk8OIEYrwO5KrdT4fYAjUiQ8iJVP1fumZ3XGDf1XJq0Q3C9I0wlsQxbtYY2xRAvP2eZ0024wl5yqd');\nconst CheckoutPage = () => {\n        return (\n          <Elements stripe={stripePromise}>\n            <CheckoutForm />\n        </Elements>\n    );\n}\n\nexport default CheckoutPage; \n\n\n/* 4242 4242 4242 4242 */"]},"metadata":{},"sourceType":"module"}
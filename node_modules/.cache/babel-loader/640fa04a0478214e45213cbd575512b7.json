{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/mica/Projects/Websites/hyfix/frontend/src/components/store/purchase/Checkout.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useEffect, useState } from 'react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { useCookies } from 'react-cookie';\nimport { CardElement, Elements, useElements, useStripe } from '@stripe/react-stripe-js';\nimport { getProductsInCart, createPaymentIntent } from '../../../api';\nimport { useHistory } from 'react-router';\nconst CARD_ELEMENT_OPTIONS = {\n  style: {\n    base: {\n      color: '#32325d',\n      fontFamily: '\"Helvetica Neue\" , Helvetica, sans-serif',\n      fontSmoothing: 'antialiased',\n      fontSize: '40px',\n      '::placeholder': {\n        color: '#aab7c4'\n      }\n    },\n    invalid: {\n      color: '#fa755a',\n      iconColor: '#fa755a'\n    }\n  }\n};\n\nconst CheckoutForm = () => {\n  _s();\n\n  const stripe = useStripe();\n  const elements = useElements();\n  const history = useHistory();\n  const [error, setError] = useState(null);\n  const [clientSecret, setClientSecret] = useState(null);\n  const [cookies, removeCookie] = useCookies();\n  const [metadata, setMetadata] = useState(null);\n  const [succeeded, setSucceeded] = useState(false);\n  const [processing, setProcessing] = useState(false);\n  const [recipient, setRecipient] = useState(null);\n  const [street, setStreet] = useState(null);\n  const [city, setCity] = useState(null);\n  const [theState, setTheState] = useState(null);\n  const [code, setCode] = useState(null);\n  const [country, setCountry] = useState(null);\n  useEffect(() => {\n    const productList = cookies.userCart;\n    getProductsInCart(productList).then(products => {\n      createPaymentIntent(products).then(clientSecret => {\n        console.log('Payment intent success!');\n        setClientSecret(clientSecret);\n      }).catch(err => {\n        setError(err.message);\n      });\n    });\n  }, []); //keeps hook to only once, intresting?\n\n  const handlePaymentChange = ev => {\n    if (ev.error) {\n      setError(ev.error.message);\n    } else {\n      setError(null);\n    }\n  };\n\n  const handleSubmit = async ev => {\n    ev.preventDefault();\n    setProcessing(true);\n    const payload = await stripe.confirmCardPayment(clientSecret, {\n      payment_method: {\n        card: elements.getElement(CardElement),\n        billing_details: {\n          name: ev.target.name.value\n        }\n      },\n      shipping: {\n        name: recipient,\n        address: {\n          line1: street,\n          city: city,\n          state: theState,\n          country: country,\n          postal_code: code\n        }\n      }\n    });\n\n    if (payload.error) {\n      setError(`Payment failed: ${payload.error.message}`);\n      setProcessing(false);\n      console.log(\"[error]\", payload.error);\n    } else {\n      setError(null);\n      setSucceeded(true);\n      setProcessing(false);\n      setMetadata(payload.paymentIntent);\n      history.push({\n        pathname: '/store/success'\n      });\n      console.log(\"[PaymentIntent]\", payload.paymentIntent);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"checkout-page\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"checkout-form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Shipping\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Recipient Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: recipient,\n          onChange: e => setRecipient(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Street Address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: street,\n          onChange: e => setStreet(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"City\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: city,\n          onChange: e => setCity(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"double-input\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"State\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: theState,\n            onChange: e => setTheState(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Zip/Postal Code\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: code,\n            onChange: e => setCode(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Country\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: country,\n          onChange: e => setCountry(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Payment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"card-element\",\n          children: \"Credit or Debit Card\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CardElement, {\n          id: \"card-element\",\n          options: CARD_ELEMENT_OPTIONS,\n          onChange: handlePaymentChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-errors\",\n          role: \"alert\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button checkout-button\",\n        type: \"submit\",\n        children: \"Submit Payment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CheckoutForm, \"qD4fL2z52s7iJXFPz6LecA7xEXs=\", false, function () {\n  return [useStripe, useElements, useHistory, useCookies];\n});\n\n_c = CheckoutForm;\nconst stripePromise = loadStripe('pk_test_51I0CsSIzd0xoN2NEasujFfk8OIEYrwO5KrdT4fYAjUiQ8iJVP1fumZ3XGDf1XJq0Q3C9I0wlsQxbtYY2xRAvP2eZ0024wl5yqd');\n\nconst CheckoutPage = () => {\n  return /*#__PURE__*/_jsxDEV(Elements, {\n    stripe: stripePromise,\n    children: /*#__PURE__*/_jsxDEV(CheckoutForm, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 11\n  }, this);\n};\n\n_c2 = CheckoutPage;\nexport default CheckoutPage;\n/* 4242 4242 4242 4242 */\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CheckoutForm\");\n$RefreshReg$(_c2, \"CheckoutPage\");","map":{"version":3,"sources":["/Users/mica/Projects/Websites/hyfix/frontend/src/components/store/purchase/Checkout.js"],"names":["React","useEffect","useState","loadStripe","useCookies","CardElement","Elements","useElements","useStripe","getProductsInCart","createPaymentIntent","useHistory","CARD_ELEMENT_OPTIONS","style","base","color","fontFamily","fontSmoothing","fontSize","invalid","iconColor","CheckoutForm","stripe","elements","history","error","setError","clientSecret","setClientSecret","cookies","removeCookie","metadata","setMetadata","succeeded","setSucceeded","processing","setProcessing","recipient","setRecipient","street","setStreet","city","setCity","theState","setTheState","code","setCode","country","setCountry","productList","userCart","then","products","console","log","catch","err","message","handlePaymentChange","ev","handleSubmit","preventDefault","payload","confirmCardPayment","payment_method","card","getElement","billing_details","name","target","value","shipping","address","line1","state","postal_code","paymentIntent","push","pathname","e","stripePromise","CheckoutPage"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useEffect, useState } from 'react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { useCookies } from 'react-cookie';\nimport {\n    CardElement,\n    Elements,\n    useElements,\n    useStripe\n} from '@stripe/react-stripe-js';\nimport { getProductsInCart, createPaymentIntent} from '../../../api';\nimport { useHistory } from 'react-router';\n\nconst CARD_ELEMENT_OPTIONS = {\n    style: {\n        base: {\n            color: '#32325d',\n            fontFamily: '\"Helvetica Neue\" , Helvetica, sans-serif',\n            fontSmoothing: 'antialiased',\n            fontSize: '40px',\n            '::placeholder': {\n                color: '#aab7c4'\n            }\n        },\n        invalid: {\n            color: '#fa755a',\n            iconColor: '#fa755a'\n        }\n    }\n};\n\nconst CheckoutForm = () => {\n    const stripe = useStripe();\n    const elements = useElements();\n    const history = useHistory();\n\n    const [error, setError] = useState(null);\n    const [clientSecret, setClientSecret] = useState(null);\n    const [cookies, removeCookie] = useCookies();\n\n    const [metadata, setMetadata] = useState(null);\n    const [succeeded, setSucceeded] = useState(false);\n    const [processing, setProcessing] = useState(false);\n\n    const [recipient, setRecipient] = useState(null);\n    const [street, setStreet] = useState(null);\n    const [city, setCity] = useState(null);\n    const [theState, setTheState] = useState(null);\n    const [code, setCode] = useState(null);\n    const [country, setCountry] = useState(null);\n\n    useEffect(() => {\n        const productList = cookies.userCart;\n        getProductsInCart(productList).then((products) => { \n            \n            createPaymentIntent(products)\n            .then((clientSecret) => {\n                console.log('Payment intent success!')\n                setClientSecret(clientSecret);\n            })\n            .catch((err) => {\n                setError(err.message);\n            });\n        \n        });\n\n    }, []); //keeps hook to only once, intresting?\n\n    const handlePaymentChange = (ev) => {\n        if (ev.error) {\n            setError(ev.error.message);\n        } else {\n            setError(null);\n        }\n    }\n\n    const handleSubmit = async (ev) => {\n        \n        ev.preventDefault();\n        setProcessing(true);\n\n        const payload = await stripe.confirmCardPayment(clientSecret, {\n            payment_method: {\n                card: elements.getElement(CardElement),\n                billing_details: {\n                    name: ev.target.name.value,\n                }\n            },\n            shipping: {\n                name: recipient,\n                address: {\n                    line1: street, \n                    city: city,\n                    state: theState,\n                    country: country,\n                    postal_code: code\n                }\n            }\n        });\n\n        if (payload.error) {\n            setError(`Payment failed: ${payload.error.message}`);\n            setProcessing(false);\n            console.log(\"[error]\", payload.error);\n        } else {\n            setError(null); \n            setSucceeded(true);\n            setProcessing(false);\n            setMetadata(payload.paymentIntent);\n            history.push({ pathname: '/store/success'});\n            console.log(\"[PaymentIntent]\", payload.paymentIntent);\n            \n        }\n\n    };\n\n    return (\n        <main className='checkout-page'>\n            <form className='checkout-form' onSubmit={handleSubmit}>\n                <div className='form-section'>\n                    <h2>Shipping</h2>\n\n                    <label>Recipient Name</label>\n                    <input value={recipient} onChange={e => setRecipient(e.target.value)}/>\n\n                    <label>Street Address</label>\n                    <input value={street} onChange={e => setStreet(e.target.value)} />\n\n                    <label>City</label>\n                    <input value={city} onChange={e => setCity(e.target.value)} />\n\n                    <div className='double-input'>\n                        <label>State</label>\n                        <input value={theState} onChange={e => setTheState(e.target.value)} />\n\n                        <label>Zip/Postal Code</label>\n                        <input value={code} onChange={e => setCode(e.target.value)} />\n                    </div>\n                    \n\n                    <label>Country</label>\n                    <input value={country} onChange={e => setCountry(e.target.value)} />\n                </div>\n\n                <div className='form-section'>\n                    <h2>Payment</h2>\n                    <label htmlFor='card-element'>Credit or Debit Card</label>\n                    <CardElement \n                        id='card-element' \n                        options={CARD_ELEMENT_OPTIONS} \n                        onChange={handlePaymentChange}/>\n                    <div className='card-errors' role='alert'>{error}</div>\n                </div>\n\n                <button className='button checkout-button' type='submit'>Submit Payment</button>\n\n            </form>\n        </main>\n        );\n}\n\nconst stripePromise = loadStripe('pk_test_51I0CsSIzd0xoN2NEasujFfk8OIEYrwO5KrdT4fYAjUiQ8iJVP1fumZ3XGDf1XJq0Q3C9I0wlsQxbtYY2xRAvP2eZ0024wl5yqd');\nconst CheckoutPage = () => {\n        return (\n          <Elements stripe={stripePromise}>\n            <CheckoutForm />\n        </Elements>\n    );\n}\n\nexport default CheckoutPage; \n\n\n/* 4242 4242 4242 4242 */"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from\"/Users/mica/Projects/Websites/hyfix/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mica/Projects/Websites/hyfix/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/mica/Projects/Websites/hyfix/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/mica/Projects/Websites/hyfix/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mica/Projects/Websites/hyfix/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Card from'../../components/ProductCard.js';import{getProductsByCategory}from'../../api';import{jsx as _jsx}from\"react/jsx-runtime\";var Category=/*#__PURE__*/function(_Component){_inherits(Category,_Component);var _super=_createSuper(Category);function Category(props){var _this;_classCallCheck(this,Category);_this=_super.call(this,props);_this.state={category:_this.props.location.search.split('?')[1],categoryChanged:true,products:[]};_this.listProducts=_this.listProducts.bind(_assertThisInitialized(_this));return _this;}_createClass(Category,[{key:\"listProducts\",value:function listProducts(){return this.state.products.map(function(current){return/*#__PURE__*/_jsx(Card,{item:current},current._id);});}},{key:\"render\",value:function render(){var _this2=this;console.log('category rendered');if(this.state.categoryChanged){getProductsByCategory(this.state.category).then(function(products){return _this2.setState({products:products});}).catch(function(err){console.log(err);});this.setState({categoryChanged:false});}return/*#__PURE__*/_jsx(\"main\",{className:\"products-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"products-list\",children:this.listProducts()})});}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){var currentCategory=props.location.search.split('?')[1];if(state.category!==currentCategory){return{category:currentCategory,categoryChanged:true};}else{return null;}}}]);return Category;}(Component);export{Category as default};","map":{"version":3,"sources":["/Users/mica/Projects/Websites/hyfix/frontend/src/pages/store/Category.js"],"names":["React","Component","Card","getProductsByCategory","Category","props","state","category","location","search","split","categoryChanged","products","listProducts","bind","map","current","_id","console","log","then","setState","catch","err","currentCategory"],"mappings":"+yBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,IAAP,KAAiB,iCAAjB,CACA,OAASC,qBAAT,KAAsC,WAAtC,C,8CAEqBC,CAAAA,Q,oGAEjB,kBAAYC,KAAZ,CAAmB,0CACf,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CAAEC,QAAQ,CAAE,MAAKF,KAAL,CAAWG,QAAX,CAAoBC,MAApB,CAA2BC,KAA3B,CAAiC,GAAjC,EAAsC,CAAtC,CAAZ,CACEC,eAAe,CAAE,IADnB,CAEEC,QAAQ,CAAE,EAFZ,CAAb,CAGA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB,CALe,aAMlB,C,iDAYD,uBAAe,CACX,MAAO,MAAKR,KAAL,CAAWM,QAAX,CAAoBG,GAApB,CAAwB,SAAAC,OAAO,CAAI,CACtC,mBAAO,KAAC,IAAD,EAAM,IAAI,CAAEA,OAAZ,EAA0BA,OAAO,CAACC,GAAlC,CAAP,CACH,CAFM,CAAP,CAGH,C,sBAED,iBAAS,iBACLC,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAEA,GAAI,KAAKb,KAAL,CAAWK,eAAf,CAAgC,CAC5BR,qBAAqB,CAAC,KAAKG,KAAL,CAAWC,QAAZ,CAArB,CACKa,IADL,CACU,SAAAR,QAAQ,QAAI,CAAA,MAAI,CAACS,QAAL,CAAc,CAAET,QAAQ,CAAEA,QAAZ,CAAd,CAAJ,EADlB,EAEKU,KAFL,CAEW,SAAAC,GAAG,CAAI,CAACL,OAAO,CAACC,GAAR,CAAYI,GAAZ,EAAiB,CAFpC,EAGA,KAAKF,QAAL,CAAc,CAAEV,eAAe,CAAE,KAAnB,CAAd,EACH,CAED,mBACI,aAAM,SAAS,CAAC,eAAhB,uBACI,YAAK,SAAS,CAAC,eAAf,UACK,KAAKE,YAAL,EADL,EADJ,EADJ,CAQH,C,0CAlCD,kCAAgCR,KAAhC,CAAuCC,KAAvC,CAA8C,CAC1C,GAAIkB,CAAAA,eAAe,CAAGnB,KAAK,CAACG,QAAN,CAAeC,MAAf,CAAsBC,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CAAtB,CACA,GAAIJ,KAAK,CAACC,QAAN,GAAmBiB,eAAvB,CAAwC,CACpC,MAAO,CAAEjB,QAAQ,CAAEiB,eAAZ,CAA6Bb,eAAe,CAAE,IAA9C,CAAP,CACH,CAFD,IAEO,CACH,MAAO,KAAP,CACH,CAEJ,C,sBAlBiCV,S,SAAjBG,Q","sourcesContent":["import React, { Component } from 'react';\nimport Card from '../../components/ProductCard.js'; \nimport { getProductsByCategory } from '../../api';\n\nexport default class Category extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { category: this.props.location.search.split('?')[1],\n                       categoryChanged: true,\n                       products: [] };\n        this.listProducts = this.listProducts.bind(this);\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        let currentCategory = props.location.search.split('?')[1];\n        if (state.category !== currentCategory) {\n            return { category: currentCategory, categoryChanged: true };\n        } else {\n            return null;\n        }\n        \n    }\n\n    listProducts() {\n        return this.state.products.map(current => {\n            return <Card item={current} key={current._id}/>;\n        })\n    }\n\n    render() {\n        console.log('category rendered');\n        \n        if (this.state.categoryChanged) {\n            getProductsByCategory(this.state.category)\n                .then(products => this.setState({ products: products }))\n                .catch(err => {console.log(err)})\n            this.setState({ categoryChanged: false });\n        }\n\n        return (\n            <main className='products-page'>\n                <div className='products-list'>\n                    {this.listProducts()}\n                </div>\n            </main>\n        );\n\n    }\n\n}"]},"metadata":{},"sourceType":"module"}